<!--/*
This top section is not exported as a part of the Narrative,
it is only present so that this template can be viewed in
a browser.
-->
<html>

<head>
    <link rel="stylesheet" type="text/css" href="narrative.css"/>
</head>

<body>
<!--*/-->

<div>
    <table class="hapiPropertyTable">
        <tbody>
        <tr th:if="${resource.id}">
            <td>Id:</td>
            <td th:text="${resource.id}"></td>
        </tr>
        <tr th:if="${not resource.identifier.empty}">
            <td>Identifier:</td>
            <td>
                <th:block th:each="identifier: ${resource.identifier}">
                    <div th:narrative="${identifier}"></div>
                </th:block>
            </td>
        </tr>
        <tr th:if="${resource.clinicalStatus}">
            <td>Clinical Status:</td>
            <td th:narrative="${resource.clinicalStatus}"></td>
        </tr>
        <tr th:if="${resource.verificationStatus}">
            <td>Verification Status:</td>
            <td th:narrative="${resource.verificationStatus}"></td>
        </tr>
        <tr th:if="${resource.type}">
            <td>Type:</td>
            <td th:text="${resource.type.display}"></td>
        </tr>
        <tr th:if="${not resource.category.empty}">
            <td>Category:</td>
            <td>
                <th:block th:each="category: ${resource.category}">
                    <th:block th:if="${not category.empty}" th:text="${category.code}"></th:block>
                </th:block>
            </td>
        </tr>
        <tr th:if="${resource.criticality}">
            <td>Criticality:</td>
            <td th:text="${resource.criticality.display}"></td>
        </tr>
        <tr th:if="${not resource.code.empty}">
            <td>Code:</td>
            <td th:narrative="${resource.code}"></td>
        </tr>
        <tr th:if="${not resource.patient.empty}">
            <td>Patient:</td>
            <td th:narrative="${resource.patient}"></td>
        </tr>
        <th:block th:if="${fhirVersion} eq 'R4'">
            <tr th:if="${not resource.encounter.empty}">
                <td>Encounter:</td>
                <td th:narrative="${resource.encounter}"></td>
            </tr>
        </th:block>
        <tr th:if="${resource.onset}">
            <td>Onset:</td>
            <td th:narrative="${resource.onset}"></td>
        </tr>
        <th:block th:if="${fhirVersion} eq 'DSTU3'">
            <tr th:if="${resource.assertedDate}">
                <td>Asserted Date:</td>
                <td th:text="${#dates.format(resource.assertedDate,'dd/MM/yyyy')}"></td>
            </tr>
        </th:block>
        <th:block th:unless="${fhirVersion} eq 'DSTU3'">
            <tr th:if="${resource.recordedDate}">
                <td>Recorded Date:</td>
                <td th:text="${#dates.format(resource.recordedDate,'dd/MM/yyyy')}"></td>
            </tr>
        </th:block>
        <tr th:if="${not resource.recorder.empty}">
            <td>Recorder:</td>
            <td th:narrative="${resource.recorder}"></td>
        </tr>
        <tr th:if="${not resource.asserter.empty}">
            <td>Asserter:</td>
            <td th:narrative="${resource.asserter}"></td>
        </tr>
        <tr th:if="${resource.lastOccurrence}">
            <td>Last Occurrence:</td>
            <td th:text="${#dates.format(resource.lastOccurrence,'dd/MM/yyyy')}"></td>
        </tr>
        <tr th:if="${not resource.note.empty}">
            <td>Note:</td>
            <td>
                <div th:each="note: ${resource.note}" th:text="${note.text}"></div>
            </td>
        </tr>
        </tbody>
    </table>
    <th:block th:each="reaction: ${resource.reaction}">
        <br/>
        <table class="hapiPropertyTable">
            <tbody>
            <tr>
                <td>Reaction:</td>
                <td></td>
            </tr>
            <tr th:if="${not reaction.substance.empty}">
                <td>Substance:</td>
                <td th:narrative="${reaction.substance}"></td>
            </tr>
            <tr th:if="${not reaction.manifestation.empty}">
                <td>Manifestation:</td>
                <td>
                    <th:block th:each="manifestation: ${reaction.manifestation}">
                        <div th:if="${not manifestation.empty}" th:narrative="${manifestation}"></div>
                    </th:block>
                </td>
            </tr>
            <tr th:if="${reaction.description}">
                <td>Description:</td>
                <td th:text="${reaction.description}"></td>
            </tr>
            <tr th:if="${reaction.onset}">
                <td>Onset:</td>
                <td th:text="${#dates.format(reaction.onset,'dd/MM/yyyy')}"></td>
            </tr>
            <tr th:if="${reaction.severity}">
                <td>Severity:</td>
                <td th:text="${reaction.severity}"></td>
            </tr>
            <tr th:if="${not reaction.exposureRoute.empty}">
                <td>Exposure Route:</td>
                <td th:narrative="${reaction.exposureRoute}"></td>
            </tr>
            <tr th:if="${not reaction.noteFirstRep.empty}">
                <td>Note:</td>
                <td th:text="${reaction.noteFirstRep.text}"></td>
            </tr>
            </tbody>
        </table>
    </th:block>
</div>

<!--/*-->
</body>

</html>
<!--*/-->
